{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Desenvolvimento/SiteIhago/Site/src/components/ui/sonner.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useTheme } from \"next-themes\";\r\nimport { Toaster as Sonner, toast } from \"sonner\";\r\n\r\ntype ToasterProps = React.ComponentProps<typeof Sonner>;\r\n\r\nconst Toaster = ({ ...props }: ToasterProps) => {\r\n  const { theme = \"system\" } = useTheme();\r\n\r\n  return (\r\n    <Sonner\r\n      theme={theme as ToasterProps[\"theme\"]}\r\n      className=\"toaster group\"\r\n      toastOptions={{\r\n        classNames: {\r\n          toast:\r\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\r\n          description: \"group-[.toast]:text-muted-foreground\",\r\n          actionButton: \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\r\n          cancelButton: \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\r\n        },\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport { Toaster, toast };\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAOA,MAAM,UAAU,CAAC,EAAE,GAAG,OAAqB;;IACzC,MAAM,EAAE,QAAQ,QAAQ,EAAE,GAAG,IAAA,+JAAQ;IAErC,qBACE,6LAAC,sJAAM;QACL,OAAO;QACP,WAAU;QACV,cAAc;YACZ,YAAY;gBACV,OACE;gBACF,aAAa;gBACb,cAAc;gBACd,cAAc;YAChB;QACF;QACC,GAAG,KAAK;;;;;;AAGf;GAnBM;;QACyB,+JAAQ;;;KADjC"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///C:/Desenvolvimento/SiteIhago/Site/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nexport const isSupabaseConfigured = Boolean(supabaseUrl && supabaseAnonKey);\r\n\r\nexport const supabase = isSupabaseConfigured\r\n  ? createClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      detectSessionInUrl: true,\r\n    },\r\n  })\r\n  : null;\r\n"],"names":[],"mappings":";;;;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,uBAAuB,QAAQ,eAAe;AAEpD,MAAM,WAAW,uBACpB,IAAA,iMAAY,EAAC,aAAa,iBAAiB;IAC3C,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF,KACE"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/Desenvolvimento/SiteIhago/Site/src/context/UserContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from \"react\";\r\nimport { User } from \"@supabase/supabase-js\";\r\nimport { isSupabaseConfigured, supabase } from \"@/lib/supabase\";\r\n\r\nexport interface Organization {\r\n  id: string;\r\n  name: string;\r\n  slug: string;\r\n  role: 'owner' | 'admin' | 'staff';\r\n}\r\n\r\nexport interface UserSession {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  avatarUrl?: string;\r\n  provider?: string;\r\n  organization?: Organization;\r\n  organizations?: Organization[];\r\n  completedJobId?: string; // Mock field for review eligibility\r\n}\r\n\r\ninterface UserContextType {\r\n  user: UserSession | null;\r\n  isLoading: boolean;\r\n  login: (userData: UserSession) => Promise<void>;\r\n  logout: () => Promise<void>;\r\n  signInWithGoogle: () => Promise<void>;\r\n  switchOrganization: (orgId: string) => void;\r\n}\r\n\r\nconst UserContext = createContext<UserContextType | undefined>(undefined);\r\n\r\nconst USER_STORAGE_KEY = \"barrigudo_user_session\";\r\n\r\nexport const UserProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [user, setUser] = useState<UserSession | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const fetchUserOrganizations = async (userId: string): Promise<Organization[]> => {\r\n    if (!supabase) return [];\r\n\r\n    const { data, error } = await supabase\r\n      .from('organization_users')\r\n      .select(`\r\n        role,\r\n        organization:organizations (\r\n          id,\r\n          name,\r\n          slug\r\n        )\r\n      `)\r\n      .eq('user_id', userId);\r\n\r\n    if (error || !data) return [];\r\n\r\n    return data.map((item: any) => ({\r\n      id: item.organization.id,\r\n      name: item.organization.name,\r\n      slug: item.organization.slug,\r\n      role: item.role\r\n    }));\r\n  };\r\n\r\n  const mapSupabaseUser = async (authUser: User): Promise<UserSession> => {\r\n    const orgs = await fetchUserOrganizations(authUser.id);\r\n    return {\r\n      id: authUser.id,\r\n      name: authUser.user_metadata?.full_name || authUser.user_metadata?.name || authUser.email || \"User\",\r\n      email: authUser.email || \"\",\r\n      avatarUrl: authUser.user_metadata?.avatar_url,\r\n      provider: \"google\",\r\n      organizations: orgs,\r\n      organization: orgs.length > 0 ? orgs[0] : undefined\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSupabaseConfigured && supabase) {\r\n      let isMounted = true;\r\n\r\n      supabase.auth.getSession().then(async ({ data }) => {\r\n        if (!isMounted) return;\r\n        if (data.session?.user) {\r\n          const mappedUser = await mapSupabaseUser(data.session.user);\r\n          setUser(mappedUser);\r\n        } else {\r\n          const stored = localStorage.getItem(USER_STORAGE_KEY);\r\n          if (stored) {\r\n            setUser(JSON.parse(stored));\r\n          } else {\r\n            setUser(null);\r\n          }\r\n        }\r\n        setIsLoading(false);\r\n      });\r\n\r\n      const {\r\n        data: { subscription },\r\n      } = supabase.auth.onAuthStateChange(async (_event, session) => {\r\n        if (session?.user) {\r\n          const mappedUser = await mapSupabaseUser(session.user);\r\n          setUser(mappedUser);\r\n          localStorage.removeItem(USER_STORAGE_KEY);\r\n        } else {\r\n          setUser(null);\r\n          localStorage.removeItem(USER_STORAGE_KEY);\r\n        }\r\n      });\r\n\r\n      return () => {\r\n        isMounted = false;\r\n        subscription.unsubscribe();\r\n      };\r\n    } else {\r\n      try {\r\n        const stored = localStorage.getItem(USER_STORAGE_KEY);\r\n        if (stored) {\r\n          setUser(JSON.parse(stored));\r\n        }\r\n      } catch {\r\n        // ignore\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const login = async (userData: UserSession) => {\r\n    setUser(userData);\r\n    localStorage.setItem(USER_STORAGE_KEY, JSON.stringify(userData));\r\n  };\r\n\r\n  const logout = async () => {\r\n    if (isSupabaseConfigured && supabase) {\r\n      await supabase.auth.signOut();\r\n    }\r\n    setUser(null);\r\n    localStorage.removeItem(USER_STORAGE_KEY);\r\n  };\r\n\r\n  const switchOrganization = (orgId: string) => {\r\n    if (!user || !user.organizations) return;\r\n    const org = user.organizations.find(o => o.id === orgId);\r\n    if (org) {\r\n      setUser({ ...user, organization: org });\r\n    }\r\n  };\r\n\r\n  const signInWithGoogle = async () => {\r\n    if (!isSupabaseConfigured || !supabase) {\r\n      throw new Error(\"Supabase is not configured. Add NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.\");\r\n    }\r\n\r\n    const { error } = await supabase.auth.signInWithOAuth({\r\n      provider: \"google\",\r\n      options: {\r\n        redirectTo: `${window.location.origin}/experiences`,\r\n      },\r\n    });\r\n\r\n    if (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user, isLoading, login, logout, signInWithGoogle, switchOrganization }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useUser = () => {\r\n  const context = useContext(UserContext);\r\n  if (!context) {\r\n    throw new Error(\"useUser must be used within UserProvider\");\r\n  }\r\n  return context;\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///C:/Desenvolvimento/SiteIhago/Site/src/app/providers.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\r\nimport { UserProvider } from \"@/context/UserContext\";\r\nimport { useState } from \"react\";\r\nimport { ThemeProvider } from \"next-themes\";\r\n\r\nexport default function Providers({ children }: { children: React.ReactNode }) {\r\n    const [queryClient] = useState(() => new QueryClient());\r\n\r\n    return (\r\n        <QueryClientProvider client={queryClient}>\r\n            <ThemeProvider attribute=\"class\" defaultTheme=\"light\" enableSystem>\r\n                <UserProvider>\r\n                    {children}\r\n                </UserProvider>\r\n            </ThemeProvider>\r\n        </QueryClientProvider>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS,UAAU,EAAE,QAAQ,EAAiC;;IACzE,MAAM,CAAC,YAAY,GAAG,IAAA,yKAAQ;8BAAC,IAAM,IAAI,+LAAW;;IAEpD,qBACI,6LAAC,gNAAmB;QAAC,QAAQ;kBACzB,cAAA,6LAAC,oKAAa;YAAC,WAAU;YAAQ,cAAa;YAAQ,YAAY;sBAC9D,cAAA,6LAAC,iJAAY;0BACR;;;;;;;;;;;;;;;;AAKrB;GAZwB;KAAA"}}]
}