{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///C:/Desenvolvimento/SiteIhago/Site/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nexport const isSupabaseConfigured = Boolean(supabaseUrl && supabaseAnonKey);\r\n\r\nexport const supabase = isSupabaseConfigured\r\n  ? createClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      detectSessionInUrl: true,\r\n    },\r\n  })\r\n  : null;\r\n"],"names":[],"mappings":";;;;;;AAAA;;;;;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,uBAAuB,QAAQ,eAAe;AAEpD,MAAM,WAAW,uBACpB,IAAA,2OAAY,EAAC,aAAa,iBAAiB;IAC3C,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF,KACE"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Desenvolvimento/SiteIhago/Site/src/lib/admin-auth.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabase\";\r\n\r\nexport type AdminSession = {\r\n  email: string;\r\n};\r\n\r\nexport type AdminLoginResult = {\r\n  ok: boolean;\r\n  error?: string;\r\n};\r\n\r\nexport const adminLogin = async (): Promise<AdminLoginResult> => {\r\n  if (!supabase) return { ok: false, error: \"Supabase not configured\" };\r\n\r\n  const { error } = await supabase.auth.signInWithOAuth({\r\n    provider: 'google',\r\n    options: {\r\n      redirectTo: `${window.location.origin}/admin`\r\n    }\r\n  });\r\n\r\n  if (error) return { ok: false, error: error.message };\r\n  return { ok: true };\r\n};\r\n\r\nexport const fetchAdminSession = async (): Promise<AdminSession | null> => {\r\n  if (!supabase) return null;\r\n  const { data: { session } } = await supabase.auth.getSession();\r\n  if (!session?.user) return null;\r\n\r\n  return {\r\n    email: session.user.email || \"Unknown\",\r\n  };\r\n};\r\n\r\nexport const adminLogout = async (): Promise<void> => {\r\n  if (!supabase) return;\r\n  await supabase.auth.signOut();\r\n};\r\n\r\nexport type LoginAttempt = {\r\n  timestamp: string;\r\n  email: string;\r\n  ip: string;\r\n  outcome: \"success\" | \"fail\";\r\n  reason?: string;\r\n};\r\n\r\nexport const fetchLoginAttempts = async (status?: string): Promise<LoginAttempt[]> => {\r\n  // Login attempts tracking should be moved to a Supabase table if needed\r\n  // For now returning empty to satisfy the UI\r\n  return [];\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;;AAWO,MAAM,aAAa;IACxB,IAAI,CAAC,2HAAQ,EAAE,OAAO;QAAE,IAAI;QAAO,OAAO;IAA0B;IAEpE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,2HAAQ,CAAC,IAAI,CAAC,eAAe,CAAC;QACpD,UAAU;QACV,SAAS;YACP,YAAY,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC;QAC/C;IACF;IAEA,IAAI,OAAO,OAAO;QAAE,IAAI;QAAO,OAAO,MAAM,OAAO;IAAC;IACpD,OAAO;QAAE,IAAI;IAAK;AACpB;AAEO,MAAM,oBAAoB;IAC/B,IAAI,CAAC,2HAAQ,EAAE,OAAO;IACtB,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,2HAAQ,CAAC,IAAI,CAAC,UAAU;IAC5D,IAAI,CAAC,SAAS,MAAM,OAAO;IAE3B,OAAO;QACL,OAAO,QAAQ,IAAI,CAAC,KAAK,IAAI;IAC/B;AACF;AAEO,MAAM,cAAc;IACzB,IAAI,CAAC,2HAAQ,EAAE;IACf,MAAM,2HAAQ,CAAC,IAAI,CAAC,OAAO;AAC7B;AAUO,MAAM,qBAAqB,OAAO;IACvC,wEAAwE;IACxE,4CAA4C;IAC5C,OAAO,EAAE;AACX"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Desenvolvimento/SiteIhago/Site/src/pages/admin/AdminLogin.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { fetchAdminSession, adminLogin } from \"@/lib/admin-auth\";\r\nimport { Lock } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst AdminLogin = () => {\r\n  const navigate = useNavigate();\r\n  const [error, setError] = useState(\"\");\r\n  const [checkingSession, setCheckingSession] = useState(true);\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n\r\n    fetchAdminSession()\r\n      .then((session) => {\r\n        if (!active) return;\r\n        if (session?.email) {\r\n          navigate(\"/admin\", { replace: true });\r\n          return;\r\n        }\r\n        setCheckingSession(false);\r\n      })\r\n      .catch(() => {\r\n        if (!active) return;\r\n        setCheckingSession(false);\r\n      });\r\n\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, [navigate]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    const result = await fetchAdminSession();\r\n    if (sessionStorage.getItem(\"admin_session\") || result?.email) {\r\n      navigate(\"/admin\", { replace: true });\r\n      return;\r\n    }\r\n\r\n    const loginResult = await adminLogin();\r\n    if (!loginResult.ok) {\r\n      setError(loginResult.error || \"Login failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center px-6\" style={{ background: \"linear-gradient(160deg, #0b2a4a 0%, #081a2f 100%)\" }}>\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.5 }}\r\n        className=\"w-full max-w-sm\"\r\n      >\r\n        <div className=\"bg-white rounded-2xl border border-gray-200 p-8 shadow-lg\">\r\n          <div className=\"w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center mx-auto mb-6\">\r\n            <Lock className=\"h-5 w-5 text-blue-600\" strokeWidth={1.5} />\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-center text-gray-900 mb-2\">Admin Login</h1>\r\n          <p className=\"text-center text-sm text-gray-600 mb-8\">Click to access the admin panel</p>\r\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n            {error && <p className=\"text-red-600 text-sm font-medium\">{error}</p>}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={checkingSession}\r\n              className=\"w-full py-3 bg-blue-600 text-white text-sm font-semibold rounded-lg hover:bg-blue-700 transition-all duration-200 hover:shadow-lg active:scale-[0.99]\"\r\n            >\r\n              {checkingSession ? \"Checking...\" : \"Sign In\"}\r\n            </button>\r\n          </form>\r\n          <p className=\"text-[11px] text-gray-500 text-center mt-6 leading-relaxed\">\r\n            Access is enabled by one-click login.\r\n          </p>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminLogin;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAEA,MAAM,aAAa;IACjB,MAAM,WAAW,IAAA,iNAAW;IAC5B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+GAAQ,EAAC;IAEvD,IAAA,gHAAS,EAAC;QACR,IAAI,SAAS;QAEb,IAAA,yIAAiB,IACd,IAAI,CAAC,CAAC;YACL,IAAI,CAAC,QAAQ;YACb,IAAI,SAAS,OAAO;gBAClB,SAAS,UAAU;oBAAE,SAAS;gBAAK;gBACnC;YACF;YACA,mBAAmB;QACrB,GACC,KAAK,CAAC;YACL,IAAI,CAAC,QAAQ;YACb,mBAAmB;QACrB;QAEF,OAAO;YACL,SAAS;QACX;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,MAAM,SAAS,MAAM,IAAA,yIAAiB;QACtC,IAAI,eAAe,OAAO,CAAC,oBAAoB,QAAQ,OAAO;YAC5D,SAAS,UAAU;gBAAE,SAAS;YAAK;YACnC;QACF;QAEA,MAAM,cAAc,MAAM,IAAA,kIAAU;QACpC,IAAI,CAAC,YAAY,EAAE,EAAE;YACnB,SAAS,YAAY,KAAK,IAAI;QAChC;IACF;IAEA,qBACE,qKAAC;QAAI,WAAU;QAAqD,OAAO;YAAE,YAAY;QAAoD;kBAC3I,cAAA,qKAAC,iMAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC7B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,YAAY;gBAAE,UAAU;YAAI;YAC5B,WAAU;sBAEV,cAAA,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAI,WAAU;kCACb,cAAA,qKAAC,mMAAI;4BAAC,WAAU;4BAAwB,aAAa;;;;;;;;;;;kCAEvD,qKAAC;wBAAG,WAAU;kCAAoD;;;;;;kCAClE,qKAAC;wBAAE,WAAU;kCAAyC;;;;;;kCACtD,qKAAC;wBAAK,UAAU;wBAAc,WAAU;;4BACrC,uBAAS,qKAAC;gCAAE,WAAU;0CAAoC;;;;;;0CAC3D,qKAAC;gCACC,MAAK;gCACL,UAAU;gCACV,WAAU;0CAET,kBAAkB,gBAAgB;;;;;;;;;;;;kCAGvC,qKAAC;wBAAE,WAAU;kCAA6D;;;;;;;;;;;;;;;;;;;;;;AAOpF;uCAEe"}}]
}