module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},16928,a=>a.a(async(b,c)=>{try{let b=await a.y("@supabase/supabase-js-13bdb2f0966edf07");a.n(b),c()}catch(a){c(a)}},!0),81462,a=>a.a(async(b,c)=>{try{var d=a.i(16928),e=b([d]);[d]=e.then?(await e)():e;let f="https://ozhjvprhhsdglxokfwze.supabase.co",g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96aGp2cHJoaHNkZ2x4b2tmd3plIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMjE5MTAsImV4cCI6MjA4NzU5NzkxMH0.i1pbvk17MMghLzirtC_1uOEIPAPQUcUuTQWpnZT3xAY",h=!!(f&&g),i=h?(0,d.createClient)(f,g,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}):null;a.s(["isSupabaseConfigured",0,h,"supabase",0,i]),c()}catch(a){c(a)}},!1),64375,a=>{"use strict";var b=a.i(27669);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],64375)},57143,a=>{"use strict";let b=(0,a.i(64375).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],57143)},46032,a=>{"use strict";let b=(0,a.i(64375).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],46032)},97192,a=>{"use strict";let b=(0,a.i(64375).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],97192)},69320,a=>a.a(async(b,c)=>{try{let b=await a.y("sonner-9908e9c26092bf41");a.n(b),c()}catch(a){c(a)}},!0),37644,a=>a.a(async(b,c)=>{try{var d=a.i(81462),e=b([d]);[d]=e.then?(await e)():e;let f="barrigudo_reviews",g=d.isSupabaseConfigured&&d.supabase?new class{mapRowToReview(a){return{id:a.id,userName:a.user_name,userAvatarUrl:a.user_avatar_url??"",rating:a.rating,body:a.body,createdAt:new Date(a.created_at),isHidden:a.is_hidden}}async getReviews(a){if(!d.supabase)return[];let b=d.supabase.from("reviews").select("id, user_name, user_avatar_url, rating, body, created_at, is_hidden");a?.includeHidden||(b=b.eq("is_hidden",!1)),a?.rating&&(b=b.eq("rating",a.rating)),b=a?.sort==="highest"?b.order("rating",{ascending:!1}).order("created_at",{ascending:!1}):b.order("created_at",{ascending:!1});let c=a?.limit??6,e=a?.offset??0;b=b.range(e,e+c-1);let{data:f,error:g}=await b;if(g)throw Error(g.message);return(f||[]).map(a=>this.mapRowToReview(a))}async addReview(a){if(!d.supabase)throw Error("Supabase client not initialized.");let{data:{user:b},error:c}=await d.supabase.auth.getUser();if(c||!b)throw Error("You must be logged in to post a review.");let e={user_id:b.id,user_name:a.userName,user_avatar_url:a.userAvatarUrl||null,rating:Math.max(1,Math.min(5,a.rating)),body:a.body},{data:f,error:g}=await d.supabase.from("reviews").insert(e).select("id, user_name, user_avatar_url, rating, body, created_at").single();if(g)throw Error(g.message);return this.mapRowToReview(f)}async deleteReview(a){if(!d.supabase)return;let{error:b}=await d.supabase.from("reviews").delete().eq("id",a);if(b)throw Error(b.message)}async toggleReviewVisibility(a,b){if(!d.supabase)return;let{error:c}=await d.supabase.from("reviews").update({is_hidden:b}).eq("id",a);if(c)throw Error(c.message)}async getStats(){if(!d.supabase)return{avgRating:0,totalReviews:0,ratingDistribution:{1:0,2:0,3:0,4:0,5:0}};let{data:a,error:b}=await d.supabase.from("reviews").select("rating");if(b)throw Error(b.message);let c=(a||[]).map(a=>a.rating),e=c.length,f={1:0,2:0,3:0,4:0,5:0};c.forEach(a=>{void 0!==f[a]&&(f[a]+=1)});let g=e>0?c.reduce((a,b)=>a+b,0)/e:0;return{avgRating:Math.round(10*g)/10,totalReviews:e,ratingDistribution:f}}}:new class{getAll(){try{let a=localStorage.getItem(f);if(!a)return[];return JSON.parse(a).map(a=>({...a,createdAt:new Date(a.createdAt)}))}catch{return[]}}saveAll(a){localStorage.setItem(f,JSON.stringify(a))}async getReviews(a){let b=this.getAll();a?.rating&&(b=b.filter(b=>b.rating===a.rating)),a?.sort==="highest"?b.sort((a,b)=>b.rating-a.rating||b.createdAt.getTime()-a.createdAt.getTime()):b.sort((a,b)=>b.createdAt.getTime()-a.createdAt.getTime());let c=a?.limit??6,d=a?.offset??0;return b.slice(d,d+c)}async addReview(a){let b=this.getAll(),c={id:`review_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userName:a.userName,userAvatarUrl:a.userAvatarUrl,rating:Math.max(1,Math.min(5,a.rating)),body:a.body,createdAt:new Date,isHidden:!1};return b.push(c),this.saveAll(b),c}async deleteReview(a){let b=this.getAll().filter(b=>b.id!==a);this.saveAll(b)}async toggleReviewVisibility(a,b){let c=this.getAll(),d=c.findIndex(b=>b.id===a);-1!==d&&(c[d].isHidden=b,this.saveAll(c))}async getStats(){let a=this.getAll(),b=a.length,c={1:0,2:0,3:0,4:0,5:0};a.forEach(a=>{c[a.rating]++});let d=b>0?a.reduce((a,b)=>a+b.rating,0)/b:0;return{avgRating:Math.round(10*d)/10,totalReviews:b,ratingDistribution:c}}};a.s(["reviewsService",0,g]),c()}catch(a){c(a)}},!1),32660,a=>{"use strict";let b=(0,a.i(64375).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],32660)},20578,a=>{"use strict";let b=(0,a.i(64375).default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["EyeOff",()=>b],20578)},20327,a=>{"use strict";let b=(0,a.i(64375).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);a.s(["Filter",()=>b],20327)},91565,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(97192),g=a.i(32660),h=a.i(20578),i=a.i(46032),j=a.i(57143),k=a.i(20327),l=a.i(37644),m=a.i(69320),n=b([l,m]);[l,m]=n.then?(await n)():n,a.s(["default",0,()=>{let[a,b]=(0,e.useState)([]),[c,n]=(0,e.useState)(!0),[o,p]=(0,e.useState)(""),[q,r]=(0,e.useState)("all"),s=async()=>{try{n(!0);let a=await l.reviewsService.getReviews({limit:100,includeHidden:!0});b(a)}catch(a){m.toast.error("Failed to load reviews")}finally{n(!1)}};(0,e.useEffect)(()=>{s()},[]);let t=async(a,b)=>{try{await l.reviewsService.toggleReviewVisibility(a,!b),m.toast.success(b?"Review published":"Review hidden"),s()}catch(a){m.toast.error("Action failed")}},u=async a=>{if(confirm("Are you sure you want to delete this review?"))try{await l.reviewsService.deleteReview(a),m.toast.success("Review deleted"),s()}catch(a){m.toast.error("Delete failed")}},v=a.filter(a=>{let b=a.userName.toLowerCase().includes(o.toLowerCase())||a.body.toLowerCase().includes(o.toLowerCase()),c="all"===q||"visible"===q&&!a.isHidden||"hidden"===q&&a.isHidden;return b&&c});return(0,d.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 font-outfit",children:"Review Moderation"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage, approve, or hide customer reviews."})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-5 mb-6 flex flex-wrap gap-4 items-center shadow-sm",children:[(0,d.jsxs)("div",{className:"relative flex-1 min-w-[250px]",children:[(0,d.jsx)(j.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,d.jsx)("input",{className:"w-full h-10 pl-11 pr-4 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200",placeholder:"Search by name or content...",value:o,onChange:a=>p(a.target.value)})]}),(0,d.jsx)("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:["all","visible","hidden"].map(a=>(0,d.jsx)("button",{onClick:()=>r(a),className:`px-4 py-1.5 rounded-md text-xs font-semibold capitalize transition-all ${q===a?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:a},a))})]}),c?(0,d.jsx)("div",{className:"flex justify-center py-20",children:(0,d.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):(0,d.jsxs)("div",{className:"grid gap-4",children:[v.map(a=>(0,d.jsxs)("div",{className:`bg-white p-6 rounded-xl border transition-all duration-200 shadow-sm flex flex-col md:flex-row gap-6 items-start ${a.isHidden?"opacity-75 border-gray-200 grayscale-[0.5]":"border-gray-200 hover:border-gray-300"}`,children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,d.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden shrink-0 border border-gray-100",children:a.userAvatarUrl?(0,d.jsx)("img",{src:a.userAvatarUrl,alt:a.userName,className:"h-full w-full object-cover"}):(0,d.jsx)("span",{className:"text-gray-400 font-bold",children:a.userName[0]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-gray-900 font-outfit",children:a.userName}),(0,d.jsx)("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(b=>(0,d.jsx)(f.Star,{className:`h-3 w-3 ${b<=a.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},b))})]}),(0,d.jsx)("span",{className:"ml-auto text-xs text-gray-400",children:new Date(a.createdAt).toLocaleDateString()})]}),(0,d.jsxs)("p",{className:"text-gray-600 text-sm italic leading-relaxed",children:['"',a.body,'"']}),a.isHidden&&(0,d.jsxs)("span",{className:"inline-flex items-center gap-1 mt-3 px-2 py-0.5 rounded bg-gray-100 text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:[(0,d.jsx)(h.EyeOff,{className:"h-2.5 w-2.5"})," Hidden from Public"]})]}),(0,d.jsxs)("div",{className:"flex md:flex-col gap-2 shrink-0 self-center md:self-start",children:[(0,d.jsx)("button",{onClick:()=>t(a.id,!!a.isHidden),className:`flex items-center justify-center h-10 w-10 rounded-lg transition-all duration-200 ${a.isHidden?"bg-green-50 text-green-600 hover:bg-green-100":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,title:a.isHidden?"Publish":"Hide",children:a.isHidden?(0,d.jsx)(g.Eye,{className:"h-5 w-5"}):(0,d.jsx)(h.EyeOff,{className:"h-5 w-5"})}),(0,d.jsx)("button",{onClick:()=>u(a.id),className:"flex items-center justify-center h-10 w-10 rounded-lg bg-red-50 text-red-600 hover:bg-red-100 transition-all duration-200",title:"Delete",children:(0,d.jsx)(i.Trash2,{className:"h-5 w-5"})})]})]},a.id)),0===v.length&&(0,d.jsxs)("div",{className:"text-center py-20 bg-gray-50 rounded-xl border border-dashed border-gray-300",children:[(0,d.jsx)(k.Filter,{className:"h-10 w-10 text-gray-300 mx-auto mb-3"}),(0,d.jsx)("p",{className:"text-gray-500 font-medium",children:"No reviews found matching your criteria."})]})]})]})}]),c()}catch(a){c(a)}},!1),83664,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(39141),h=a.i(6555),i=a.i(91565),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/Reviews",pathname:"/admin/Reviews",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/Reviews",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__8cb03097._.js.map