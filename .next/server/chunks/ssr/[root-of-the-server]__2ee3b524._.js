module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},16928,a=>a.a(async(b,c)=>{try{let b=await a.y("@supabase/supabase-js-13bdb2f0966edf07");a.n(b),c()}catch(a){c(a)}},!0),81462,a=>a.a(async(b,c)=>{try{var d=a.i(16928),e=b([d]);[d]=e.then?(await e)():e;let f="https://ozhjvprhhsdglxokfwze.supabase.co",g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96aGp2cHJoaHNkZ2x4b2tmd3plIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMjE5MTAsImV4cCI6MjA4NzU5NzkxMH0.i1pbvk17MMghLzirtC_1uOEIPAPQUcUuTQWpnZT3xAY",h=!!(f&&g),i=h?(0,d.createClient)(f,g,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}):null;a.s(["isSupabaseConfigured",0,h,"supabase",0,i]),c()}catch(a){c(a)}},!1),64375,a=>{"use strict";var b=a.i(27669);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],64375)},47899,(a,b,c)=>{b.exports=a.x("react-router-dom-2c8e5fc0cdea126d",()=>require("react-router-dom-2c8e5fc0cdea126d"))},57143,a=>{"use strict";let b=(0,a.i(64375).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],57143)},70675,a=>a.a(async(b,c)=>{try{var d=a.i(81462),e=b([d]);[d]=e.then?(await e)():e;let f="barrigudo_leads",g=()=>{try{let a=localStorage.getItem(f);return a?JSON.parse(a):[]}catch{return[]}},h=async a=>{if(!d.supabase)return[];let b=d.supabase.from("leads").select("*").order("createdAt",{ascending:!1});a&&(b=b.eq("organization_id",a));let{data:c,error:e}=await b;return e?(console.error("Supabase getLeads error:",e.message),[]):c||[]},i=async a=>{if(!d.supabase)throw Error("Supabase not configured");let b=new Date().toISOString(),c={...a,organization_id:a.organization_id||"45689bbf-193b-4ae8-82f4-e32bbe63b6dd",status:"New",ownerNotes:"",updatedAt:b,statusHistory:[{status:"New",timestamp:b}]},{error:e}=await d.supabase.from("leads").insert(c);if(e)throw console.error("Supabase saveLead error:",e),Error(e.message);return{...c,id:"temp",createdAt:b}},j=async(a,b)=>{if(!d.supabase)return null;let c=new Date().toISOString(),{data:e}=await d.supabase.from("leads").select("statusHistory, status").eq("id",a).single(),f=e?.statusHistory||[];b.status&&b.status!==e?.status&&f.push({status:b.status,timestamp:c});let{data:g,error:h}=await d.supabase.from("leads").update({...b,updatedAt:c,statusHistory:f}).eq("id",a).select().single();return h?(console.error("Supabase updateLead error:",h.message),null):g},k=async a=>d.isSupabaseConfigured&&d.supabase?h(a):g(),l=async a=>{let b,c,e;return d.isSupabaseConfigured&&d.supabase?i(a):(b=new Date().toISOString(),c={...a,id:crypto.randomUUID(),createdAt:b,status:"New",ownerNotes:"",updatedAt:b,statusHistory:[{status:"New",timestamp:b}]},(e=g()).unshift(c),localStorage.setItem(f,JSON.stringify(e)),c)},m=async(a,b)=>{if(d.isSupabaseConfigured&&d.supabase)return j(a,b);let c=g(),e=c.findIndex(b=>b.id===a);if(-1===e)return null;let h=new Date().toISOString(),i={...c[e],...b,updatedAt:h};return b.status&&b.status!==c[e].status&&(i.statusHistory=[...i.statusHistory||[],{status:b.status,timestamp:h}]),c[e]=i,localStorage.setItem(f,JSON.stringify(c)),i},n=async a=>{if(d.isSupabaseConfigured&&d.supabase){if(!d.supabase)return null;let{data:b,error:c}=await d.supabase.from("leads").select("*").eq("id",a).single();return c?null:b}return g().find(b=>b.id===a)||null};a.s(["getLeadById",0,n,"getLeads",0,k,"saveLead",0,l,"updateLead",0,m]),c()}catch(a){c(a)}},!1),32572,a=>{"use strict";let b=(0,a.i(64375).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);a.s(["Download",()=>b],32572)},35194,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(47899),g=a.i(57143),h=a.i(32572),i=a.i(70675),j=b([i]);[i]=j.then?(await j)():j,a.s(["default",0,()=>{let a=(0,f.useNavigate)(),[b,c]=(0,e.useState)([]);(0,e.useEffect)(()=>{(0,i.getLeads)().then(c)},[]);let[j,k]=(0,e.useState)(""),[l,m]=(0,e.useState)("All"),[n,o]=(0,e.useState)("All"),[p,q]=(0,e.useState)("All"),[r,s]=(0,e.useState)(new Set),t=new Date,u=(0,e.useMemo)(()=>b.filter(a=>{if("All"!==l&&a.status!==l||"All"!==p&&!a.locationType.includes(p))return!1;if("All"!==n){let b=new Date(a.createdAt);if("Today"===n&&b.toDateString()!==t.toDateString()||"7d"===n&&t.getTime()-b.getTime()>6048e5||"30d"===n&&t.getTime()-b.getTime()>2592e6)return!1}if(j){let b=j.toLowerCase();return a.fullName.toLowerCase().includes(b)||a.email.toLowerCase().includes(b)||a.phone.includes(b)||a.zip.includes(b)}return!0}),[b,j,l,n,p]),v=async a=>{await Promise.all(Array.from(r).map(b=>(0,i.updateLead)(b,{status:a})));let b=await (0,i.getLeads)();c(b),s(new Set)},w=({items:a,active:b,onChange:c})=>(0,d.jsx)("div",{className:"flex gap-1.5",children:a.map(a=>(0,d.jsx)("button",{onClick:()=>c(a),className:`px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-200 ${b===a?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:text-gray-900 hover:bg-gray-300"}`,children:a},a))});return(0,d.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[(0,d.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Inbox"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage and track all leads"})]}),(0,d.jsxs)("button",{onClick:()=>{let a=u.map(a=>`${a.createdAt},${a.serviceSlug},${a.zip},"${a.fullName}",${a.email},${a.phone},${a.status}`).join("\n"),b=new Blob(["Date,Service,ZIP,Name,Email,Phone,Status\n"+a],{type:"text/csv"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download="leads.csv",d.click(),URL.revokeObjectURL(c)},className:"flex items-center gap-2 px-4 py-2.5 rounded-lg border border-gray-300 text-sm text-gray-700 hover:text-gray-900 hover:border-gray-400 transition-all duration-200",children:[(0,d.jsx)(h.Download,{className:"h-4 w-4"})," Export CSV"]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5 mb-6 flex flex-wrap gap-4 items-center",children:[(0,d.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,d.jsx)(g.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,d.jsx)("input",{className:"w-full h-10 pl-11 pr-4 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200",placeholder:"Search name, email, phone, zip...",value:j,onChange:a=>k(a.target.value)})]}),(0,d.jsx)(w,{items:["All","New","Contacted","Won","Lost"],active:l,onChange:m}),(0,d.jsx)(w,{items:["All","Today","7d","30d"],active:n,onChange:o}),(0,d.jsx)(w,{items:["All","Home","Business"],active:p,onChange:q})]}),r.size>0&&(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-blue-300 bg-blue-50 p-4 mb-4 flex items-center gap-3",children:[(0,d.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[r.size," selected"]}),(0,d.jsx)("button",{onClick:()=>v("Contacted"),className:"px-3 py-1.5 rounded-lg bg-white border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Mark Contacted"}),(0,d.jsx)("button",{onClick:()=>v("Won"),className:"px-3 py-1.5 rounded-lg bg-white border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Mark Won"}),(0,d.jsx)("button",{onClick:()=>v("Lost"),className:"px-3 py-1.5 rounded-lg bg-white border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Mark Lost"})]}),(0,d.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full text-sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,d.jsx)("th",{className:"px-6 py-4 w-10",children:(0,d.jsx)("input",{type:"checkbox",className:"rounded border-gray-300",onChange:a=>{s(a.target.checked?new Set(u.map(a=>a.id)):new Set)}})}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-widest",children:"Date"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-widest",children:"Service"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-widest",children:"ZIP"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-widest",children:"Name"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-widest",children:"Email"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-widest",children:"Phone"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-widest",children:"Status"})]})}),(0,d.jsxs)("tbody",{children:[u.map(b=>(0,d.jsxs)("tr",{className:"border-t border-gray-200 hover:bg-gray-50 cursor-pointer transition-colors duration-150",children:[(0,d.jsx)("td",{className:"px-6 py-4",onClick:a=>a.stopPropagation(),children:(0,d.jsx)("input",{type:"checkbox",className:"rounded border-gray-300",checked:r.has(b.id),onChange:()=>{var a;let c;return a=b.id,void((c=new Set(r)).has(a)?c.delete(a):c.add(a),s(c))}})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",onClick:()=>a(`/admin/leads/${b.id}`),children:new Date(b.createdAt).toLocaleDateString()}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-900 font-medium",onClick:()=>a(`/admin/leads/${b.id}`),children:b.serviceSlug}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-600",onClick:()=>a(`/admin/leads/${b.id}`),children:b.zip}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-900 font-semibold",onClick:()=>a(`/admin/leads/${b.id}`),children:b.fullName}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-600",onClick:()=>a(`/admin/leads/${b.id}`),children:b.email}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-600",onClick:()=>a(`/admin/leads/${b.id}`),children:b.phone}),(0,d.jsx)("td",{className:"px-6 py-4",onClick:()=>a(`/admin/leads/${b.id}`),children:(0,d.jsx)("span",{className:`text-xs px-2.5 py-1 rounded-full font-semibold ${"New"===b.status?"bg-blue-100 text-blue-700":"Contacted"===b.status?"bg-orange-100 text-orange-700":"Won"===b.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:b.status})})]},b.id)),0===u.length&&(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:8,className:"px-6 py-16 text-center text-gray-600",children:"No leads match your filters."})})]})]})})})]})}]),c()}catch(a){c(a)}},!1),98250,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(39141),h=a.i(6555),i=a.i(35194),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/Inbox",pathname:"/admin/Inbox",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/Inbox",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__2ee3b524._.js.map