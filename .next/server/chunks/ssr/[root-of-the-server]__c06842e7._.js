module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},16928,a=>a.a(async(b,c)=>{try{let b=await a.y("@supabase/supabase-js-13bdb2f0966edf07");a.n(b),c()}catch(a){c(a)}},!0),81462,a=>a.a(async(b,c)=>{try{var d=a.i(16928),e=b([d]);[d]=e.then?(await e)():e;let f="https://ozhjvprhhsdglxokfwze.supabase.co",g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96aGp2cHJoaHNkZ2x4b2tmd3plIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMjE5MTAsImV4cCI6MjA4NzU5NzkxMH0.i1pbvk17MMghLzirtC_1uOEIPAPQUcUuTQWpnZT3xAY",h=!!(f&&g),i=h?(0,d.createClient)(f,g,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}):null;a.s(["isSupabaseConfigured",0,h,"supabase",0,i]),c()}catch(a){c(a)}},!1),64375,a=>{"use strict";var b=a.i(27669);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],64375)},80976,a=>a.a(async(b,c)=>{try{var d=a.i(81462),e=b([d]);[d]=e.then?(await e)():e;let f=a=>({id:a.id,title:a.title,category:a.category,coverImage:a.coverImage,images:a.images||[],tags:a.tags||[],description:a.description||"",highlights:a.highlights||[],materials:a.materials||[],timeline:a.timeline||[],scope:a.scope||"",featured:a.featured,beforeAfter:a.beforeAfterBefore&&a.beforeAfterAfter?{before:a.beforeAfterBefore,after:a.beforeAfterAfter}:void 0}),g=async()=>{if(!d.supabase)return null;try{let[a,b]=await Promise.all([d.supabase.from("portfolio_categories").select("name").order("sortOrder"),d.supabase.from("portfolio_items").select("*").order("sortOrder")]);if(a.error)throw a.error;if(b.error)throw b.error;return{categories:a.data.map(a=>a.name),items:b.data.map(f),updatedAt:new Date().toISOString()}}catch(a){return console.warn("Failed to load portfolio data from Supabase",a),null}},h=async()=>{let a=await g();if(!a)throw Error("Could not fetch portfolio data");return a},i=async a=>{if(!d.supabase)throw Error("Supabase not configured");let b=a.categories.map((a,b)=>({name:a,sortOrder:b}));await d.supabase.from("portfolio_categories").delete().neq("name","___FORCE_DELETE_ALL___"),await d.supabase.from("portfolio_categories").insert(b);let c=a.items.map((a,b)=>({id:a.id,title:a.title,category:a.category,coverImage:a.coverImage,images:a.images,tags:a.tags,description:a.description,highlights:a.highlights,materials:a.materials,timeline:a.timeline,scope:a.scope,featured:a.featured,sortOrder:b,beforeAfterBefore:a.beforeAfter?.before,beforeAfterAfter:a.beforeAfter?.after}));return await d.supabase.from("portfolio_items").delete().neq("id","___FORCE_DELETE_ALL___"),await d.supabase.from("portfolio_items").insert(c),a};a.s(["fetchPortfolioAdmin",0,h,"fetchPortfolioPublic",0,g,"savePortfolioAdmin",0,i]),c()}catch(a){c(a)}},!1),77371,a=>{"use strict";let b=(0,a.i(64375).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);a.s(["Image",()=>b],77371)},46032,a=>{"use strict";let b=(0,a.i(64375).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],46032)},86246,a=>{"use strict";let b=(0,a.i(64375).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],86246)},93901,a=>{"use strict";let b=(0,a.i(64375).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],93901)},23677,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(86246),g=a.i(93901),h=a.i(46032),i=a.i(77371),j=a.i(80976),k=b([j]);[j]=k.then?(await k)():k;let l=a=>a.split(",").map(a=>a.trim()).filter(Boolean);a.s(["default",0,()=>{let[a,b]=(0,e.useState)(null),[c,k]=(0,e.useState)(null),[m,n]=(0,e.useState)(""),[o,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)(null);(0,e.useEffect)(()=>{let a=!0;return(0,j.fetchPortfolioAdmin)().then(c=>{a&&(b(c),n(c.categories.join(", ")),k(c.items[0]?.id||null))}).catch(()=>{a&&r("Unable to load portfolio data.")}),()=>{a=!1}},[]);let s=a?.items||[],t=(0,e.useMemo)(()=>s.find(a=>a.id===c)||null,[s,c]),u=c=>{a&&t&&b({...a,items:a.items.map(a=>a.id===t.id?{...a,...c}:a)})},v=async()=>{if(a){p(!0),r(null);try{let c={...a,categories:l(m)},d=await (0,j.savePortfolioAdmin)(c);b(d),n(d.categories.join(", ")),r("Saved successfully.")}catch(a){r("Save failed. Please try again.")}finally{p(!1)}}};return(0,d.jsxs)("div",{className:"p-8 max-w-6xl mx-auto",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Portfolio"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage projects, categories, and featured content."})]}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsxs)("button",{onClick:()=>{let c;if(!a)return;let d=(c=a.categories[0]||"Remodeling",{id:`project-${Date.now()}`,title:"New Project",category:c,coverImage:"",images:[],tags:[],description:"",highlights:[],materials:[],timeline:[],scope:"",featured:!1});b({...a,items:[d,...a.items]}),k(d.id)},className:"inline-flex items-center gap-2 rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-semibold text-gray-700 hover:border-gray-300",children:[(0,d.jsx)(g.Plus,{className:"h-4 w-4"})," New Project"]}),(0,d.jsxs)("button",{onClick:v,disabled:!a||o,className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-60",children:[(0,d.jsx)(f.Save,{className:"h-4 w-4"})," ",o?"Saving":"Save Changes"]})]})]}),q&&(0,d.jsx)("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white px-4 py-3 text-sm text-gray-700",children:q}),a?(0,d.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[280px_1fr]",children:[(0,d.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-4",children:[(0,d.jsx)("div",{className:"mb-4 text-xs font-semibold uppercase tracking-widest text-gray-500",children:"Projects"}),(0,d.jsx)("div",{className:"space-y-2",children:s.map(a=>(0,d.jsxs)("button",{onClick:()=>k(a.id),className:`w-full rounded-lg border px-3 py-2 text-left text-sm transition-all ${c===a.id?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 text-gray-700 hover:border-gray-300"}`,children:[(0,d.jsx)("div",{className:"font-semibold text-gray-900",children:a.title||"Untitled"}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:a.category||"Uncategorized"})]},a.id))})]}),(0,d.jsx)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6",children:t?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Title",(0,d.jsx)("input",{value:t.title,onChange:a=>u({title:a.target.value}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]}),(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Category",(0,d.jsx)("input",{value:t.category,onChange:a=>u({category:a.target.value}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]})]}),(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Cover Image URL",(0,d.jsx)("input",{value:t.coverImage,onChange:a=>u({coverImage:a.target.value}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm",placeholder:"/images/cover.jpg"})]}),(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Image Gallery URLs (comma separated)",(0,d.jsx)("textarea",{rows:3,value:t.images.join(", "),onChange:a=>u({images:l(a.target.value)}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]}),(0,d.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Tags (comma separated)",(0,d.jsx)("input",{value:t.tags.join(", "),onChange:a=>u({tags:l(a.target.value)}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]}),(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Scope",(0,d.jsx)("input",{value:t.scope,onChange:a=>u({scope:a.target.value}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]})]}),(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Description",(0,d.jsx)("textarea",{rows:3,value:t.description,onChange:a=>u({description:a.target.value}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]}),(0,d.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Highlights",(0,d.jsx)("textarea",{rows:3,value:t.highlights.join(", "),onChange:a=>u({highlights:l(a.target.value)}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]}),(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Materials",(0,d.jsx)("textarea",{rows:3,value:t.materials.join(", "),onChange:a=>u({materials:l(a.target.value)}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]}),(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Timeline",(0,d.jsx)("textarea",{rows:3,value:t.timeline.join(", "),onChange:a=>u({timeline:l(a.target.value)}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]})]}),(0,d.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Before Image URL",(0,d.jsx)("input",{value:t.beforeAfter?.before||"",onChange:a=>u({beforeAfter:{before:a.target.value,after:t.beforeAfter?.after||""}}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]}),(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["After Image URL",(0,d.jsx)("input",{value:t.beforeAfter?.after||"",onChange:a=>u({beforeAfter:{before:t.beforeAfter?.before||"",after:a.target.value}}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-6",children:[(0,d.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,d.jsx)("input",{type:"checkbox",checked:!!t.featured,onChange:a=>u({featured:a.target.checked})}),"Featured project"]}),(0,d.jsxs)("button",{onClick:()=>{if(!a||!t)return;let c=a.items.filter(a=>a.id!==t.id);b({...a,items:c}),k(c[0]?.id||null)},className:"inline-flex items-center gap-2 text-sm text-red-600 hover:text-red-700",children:[(0,d.jsx)(h.Trash2,{className:"h-4 w-4"})," Delete project"]})]}),(0,d.jsxs)("div",{className:"rounded-xl border border-dashed border-gray-200 p-4 text-xs text-gray-500",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 font-semibold text-gray-600",children:[(0,d.jsx)(i.Image,{className:"h-4 w-4"})," Image tips"]}),(0,d.jsx)("p",{className:"mt-2",children:"Use absolute paths from /public or full URLs. Keep image sizes consistent for the best layout."})]}),(0,d.jsxs)("label",{className:"text-sm text-gray-700",children:["Categories (comma separated)",(0,d.jsx)("input",{value:m,onChange:c=>{n(c.target.value),a&&b({...a,categories:l(c.target.value)})},className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm"})]})]}):(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Select a project to edit."})})]}):(0,d.jsx)("div",{className:"rounded-2xl border border-gray-200 bg-white p-8 text-sm text-gray-600",children:"Loading portfolio data..."})]})}]),c()}catch(a){c(a)}},!1),18408,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(39141),h=a.i(6555),i=a.i(23677),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/Portfolio",pathname:"/admin/Portfolio",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/Portfolio",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__c06842e7._.js.map