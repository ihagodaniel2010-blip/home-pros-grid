module.exports=[23028,a=>{"use strict";let b=(0,a.i(64375).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],23028)},15016,a=>{"use strict";let b=(0,a.i(64375).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],15016)},14619,a=>{"use strict";let b=(0,a.i(64375).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],14619)},34364,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(38277),g=a.i(32517),h=a.i(70675),i=a.i(23028),j=a.i(15016),k=a.i(14619),l=a.i(18703),m=a.i(86913),n=a.i(30548),o=a.i(87358),p=a.i(79035),q=a.i(12485),r=a.i(36006),s=a.i(4779),t=a.i(4073),u=a.i(42093),v=a.i(39362),w=a.i(55423),x=a.i(63641),y=a.i(98887),z=a.i(92371),A=b([g,h,m]);[g,h,m]=A.then?(await A)():A;let B=["#2563eb","#7c3aed","#059669","#0b2a4a"],C=({value:a})=>{let[b,c]=(0,e.useState)(0);return(0,e.useEffect)(()=>{let b=0,d=Math.max(1,Math.ceil(a/30)),e=setInterval(()=>{(b+=d)>=a?(c(a),clearInterval(e)):c(b)},30);return()=>clearInterval(e)},[a]),(0,d.jsx)("span",{children:b})};a.s(["default",0,()=>{let a=(0,f.useNavigate)(),{user:b}=(0,g.useUser)(),[c,A]=(0,e.useState)([]);(0,e.useEffect)(()=>{b?.organization?.id?(0,h.getLeads)(b.organization.id).then(A):(0,h.getLeads)().then(A)},[b]);let[D,E]=(0,e.useState)([]),[F,G]=(0,e.useState)("all"),H=new Date,I=H.toISOString().slice(0,10),J=new Date(H.getTime()-6048e5).toISOString(),K=new Date(H.getTime()-2592e6).toISOString(),L=c.filter(a=>a.createdAt.slice(0,10)===I).length,M=c.filter(a=>a.createdAt>=J).length,N=c.filter(a=>a.createdAt>=K).length,O=(0,e.useMemo)(()=>{let a={};for(let b=29;b>=0;b--)a[new Date(H.getTime()-864e5*b).toISOString().slice(0,10)]=0;return c.forEach(b=>{let c=b.createdAt?.slice(0,10);c&&void 0!==a[c]&&a[c]++}),Object.entries(a).map(([a,b])=>({date:a.slice(5),count:b}))},[c]),P=(0,e.useMemo)(()=>{let a={};return c.forEach(b=>{a[b.serviceSlug]=(a[b.serviceSlug]||0)+1}),Object.entries(a).sort((a,b)=>b[1]-a[1]).slice(0,10).map(([a,b])=>({name:a,count:b}))},[c]),Q=(0,e.useMemo)(()=>{let a=0,b=0;return c.forEach(c=>{c.locationType?.includes("Home")?a++:c.locationType?.includes("Business")&&b++}),[{name:"Home",value:a},{name:"Business",value:b}].filter(a=>a.value>0)},[c]),R=[{label:"Today",value:L,icon:l.Clock,color:"#2563eb"},{label:"This Week",value:M,icon:k.Calendar,color:"#7c3aed"},{label:"This Month",value:N,icon:j.TrendingUp,color:"#059669"},{label:"Total",value:c.length,icon:i.Users,color:"#0b2a4a"}];return(0,e.useEffect)(()=>{let a=!0,b="all"===F?void 0:F;return(0,m.fetchLoginAttempts)(b).then(b=>{a&&E(b.slice(0,50))}).catch(()=>{a&&E([])}),()=>{a=!1}},[F]),(0,d.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Overview of all leads and metrics"})]}),(0,d.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-5 mb-8",children:R.map(a=>(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:border-gray-300 transition-all duration-200",children:[(0,d.jsx)("div",{style:{borderTop:`3px solid ${a.color}`},className:"mb-4"}),(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("span",{className:"text-xs font-semibold text-gray-600 uppercase tracking-widest",children:a.label}),(0,d.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:`${a.color}15`},children:(0,d.jsx)(a.icon,{className:"h-4 w-4",style:{color:a.color},strokeWidth:1.5})})]}),(0,d.jsx)("p",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:(0,d.jsx)(C,{value:a.value})})]},a.label))}),(0,d.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6 mb-8",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm text-gray-900 mb-6",children:"Leads per Day (30 days)"}),O.length>0&&(0,d.jsx)(y.ResponsiveContainer,{width:"100%",height:280,children:(0,d.jsxs)(n.LineChart,{data:O,children:[(0,d.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,d.jsx)(u.XAxis,{dataKey:"date",tick:{fontSize:11,fill:"#6b7280"}}),(0,d.jsx)(v.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#6b7280"}}),(0,d.jsx)(x.Tooltip,{contentStyle:{background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,d.jsx)(o.Line,{type:"monotone",dataKey:"count",stroke:"#2563eb",strokeWidth:2,dot:!1})]})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm text-gray-900 mb-6",children:"Top Services"}),P.length>0&&(0,d.jsx)(y.ResponsiveContainer,{width:"100%",height:280,children:(0,d.jsxs)(p.BarChart,{data:P,layout:"vertical",children:[(0,d.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,d.jsx)(u.XAxis,{type:"number",allowDecimals:!1,tick:{fontSize:11,fill:"#6b7280"}}),(0,d.jsx)(v.YAxis,{type:"category",dataKey:"name",width:120,tick:{fontSize:11,fill:"#6b7280"}}),(0,d.jsx)(x.Tooltip,{contentStyle:{background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,d.jsx)(q.Bar,{dataKey:"count",fill:"#2563eb",radius:[0,6,6,0]})]})})]})]}),Q.length>0&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-8 max-w-md",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm text-gray-900 mb-6",children:"Location Type"}),(0,d.jsx)(y.ResponsiveContainer,{width:"100%",height:220,children:(0,d.jsxs)(r.PieChart,{children:[(0,d.jsx)(s.Pie,{data:Q,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:70,innerRadius:40,label:!0,children:Q.map((a,b)=>(0,d.jsx)(t.Cell,{fill:B[b%B.length]},b))}),(0,d.jsx)(x.Tooltip,{contentStyle:{background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,d.jsx)(z.Legend,{})]})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden mb-8",children:[(0,d.jsxs)("div",{className:"p-6 border-b border-gray-200 flex flex-wrap items-center justify-between gap-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold text-sm text-gray-900",children:"Login Attempts"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Latest 50 attempts"})]}),(0,d.jsxs)("select",{value:F,onChange:a=>G(a.target.value),className:"rounded-lg border border-gray-200 py-2 px-3 text-xs uppercase tracking-widest text-gray-600",children:[(0,d.jsx)("option",{value:"all",children:"All"}),(0,d.jsx)("option",{value:"success",children:"Success"}),(0,d.jsx)("option",{value:"fail",children:"Fail"})]})]}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full text-sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"Time"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"Email"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"IP"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"Outcome"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"Reason"})]})}),(0,d.jsxs)("tbody",{children:[D.map(a=>(0,d.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(a.timestamp).toLocaleString()}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-900 font-medium",children:a.email}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-600",children:a.ip}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsx)("span",{className:`text-xs px-2.5 py-1 rounded-full font-semibold ${"success"===a.outcome?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.outcome})}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-600",children:a.reason})]},`${a.timestamp}-${a.email}`)),0===D.length&&(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:5,className:"px-6 py-16 text-center text-gray-600",children:"No login attempts logged yet."})})]})]})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,d.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,d.jsx)("h3",{className:"font-semibold text-sm text-gray-900",children:"Recent Leads"})}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full text-sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"Date"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"Service"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"ZIP"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"Name"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"Email"}),(0,d.jsx)("th",{className:"text-left px-6 py-4 font-semibold text-gray-900 text-xs uppercase tracking-wider",children:"Status"})]})}),(0,d.jsxs)("tbody",{children:[c.slice(0,20).map(b=>(0,d.jsxs)("tr",{className:"border-t border-gray-200 hover:bg-gray-50 cursor-pointer transition-colors duration-150",onClick:()=>a(`/admin/leads/${b.id}`),children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(b.createdAt).toLocaleDateString()}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-900 font-medium",children:b.serviceSlug}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-600",children:b.zip}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-900 font-semibold",children:b.fullName}),(0,d.jsx)("td",{className:"px-6 py-4 text-gray-600",children:b.email}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsx)("span",{className:`text-xs px-2.5 py-1 rounded-full font-semibold ${"New"===b.status?"bg-blue-100 text-blue-700":"Contacted"===b.status?"bg-orange-100 text-orange-700":"Won"===b.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:b.status})})]},b.id)),0===c.length&&(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:6,className:"px-6 py-16 text-center text-gray-600",children:"No leads yet. Submit a quote to see data here."})})]})]})})]})]})}]),c()}catch(a){c(a)}},!1),53575,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(39141),h=a.i(6555),i=a.i(34364),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/Dashboard",pathname:"/admin/Dashboard",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/Dashboard",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_4601fe4a._.js.map